/*! campi-moduli-italiani 2.1.0 */
"use strict";jQuery(document).ready(function(p){const o=wp.i18n["__"],u=(p("input[type=checkbox][id^='gcmi-']").prop("checked",!1),p("input[type=hidden][id^='gcmi-updated-']").each(function(e){"false"==p(this).val()&&(window.MySuffix=p(this).attr("id").substring("gcmi-updated-".length,p(this).attr("id").length),p("input[type=checkbox][id='gcmi-"+window.MySuffix+"']").prop("checked",!0))}),300);p.ajax({data:{action:"gcmi_fb_get_locale",_ajax_nonce:gcmi_fb_obj.nonce},dataType:"json",error:function(e){r="unknown"},success:function(e){r=e.locale},type:"post",url:gcmi_fb_obj.ajax_url});var r,c="";function i(){p("button[id^='gcmi-fb-delete-filter-']").attr("disabled","disabled"),p("button[id^='gcmi-fb-edit-filter-']").attr("disabled","disabled"),p("#gcmi-fb-addnew-filter").attr("disabled","disabled")}function n(){p("#gcmi-fb-tabs-2").empty(),p("#gcmi-fb-tabs-3").empty(),p("#gcmi-fb-tabs-4").empty(),p("#gcmi-fb-tabs-5").empty()}function a(){var e="<span>In attesa dei dati...</span>";p("#gcmi-spinner-blocks").removeClass("hidden"),p("#gcmi-fb-tabs-2").append(e),p("#gcmi-fb-tabs-3").append(e),p("#gcmi-fb-tabs-4").append(e),p("#gcmi-fb-tabs-5").append(e)}function l(){var e=p("#gcmi-fb-include-ceased").prop("checked");p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,data:{action:"gcmi_fb_requery_comuni",_ajax_nonce:gcmi_fb_obj.nonce,includi:e},complete:function(){p("#gcmi-spinner-blocks").addClass("hidden")},success:function(e){n(),p("#gcmi-fb-tabs-2").append(e.regioni_html),p("#gcmi-fb-tabs-3").append(e.province_html),p("#gcmi-fb-tabs-4").append(e.comuni_html),p("#gcmi-fb-tabs-5").append(e.commit_buttons)}})}function b(e){var i=p("#gcmi-fb-include-ceased").prop("checked");p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,data:{action:"gcmi_fb_edit_filter",_ajax_nonce:gcmi_fb_obj.nonce,includi:i,filtername:e},complete:function(){p("#gcmi-spinner-blocks").addClass("hidden")},success:function(e){n(),"true"===e.includi?p("input[type='checkbox'][id='gcmi-fb-include-ceased']").prop("checked",!0):p("input[type='checkbox'][id='gcmi-fb-include-ceased']").removeAttr("checked"),p("#gcmi-fb-tabs-2").append(e.regioni_html),p("#gcmi-fb-tabs-3").append(e.province_html),p("#gcmi-fb-tabs-4").append(e.comuni_html),p("#gcmi-fb-tabs-5").append(e.commit_buttons),p("#gcmi-fb-tabs-2 input[type=checkbox]:not(:checked)").not("[id^='fb-gcmi-chkall-']").each(function(){p(this).change()}),p("#gcmi-fb-tabs-3 input[type=checkbox]:not(:checked)").not("[id^='fb-gcmi-chkallpr-']").each(function(){p(this).change()}),p(".gcmi-fb-lettera-blocco").each(function(){p(this).find(":checkbox").not("[id^='fb-gcmi-chkallcom-']").first().change()})},error:function(e){_(e,"RetrieveFilter")}})}function g(){p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,data:{action:"gcmi_fb_get_filters",_ajax_nonce:gcmi_fb_obj.nonce},success:function(e){p("#gcmi-fb-filters-container").html(""),p("#gcmi-fb-filters-container").append(e.data.filters_html)}})}function d(){p("div[class^='gcmi-fb-lettera-blocco']").each(function(){var e=p(this);0===e.find("input[type=checkbox][id^='fb-gcmi-com-']:checked").length?e.hide():e.show()})}function f(e,i){var t=new jQuery.Deferred;return p("#gcmi-fb-dialog").html(e),p("#gcmi-fb-dialog").dialog({resizable:!1,height:240,modal:!0,title:i,buttons:{OK:function(){p(this).dialog("close"),t.resolve()},Cancel:function(){p(this).dialog("close"),t.reject()}}}),t.promise()}function m(e,i){var t=new jQuery.Deferred;return p("#gcmi-fb-dialog").html(e),p("#gcmi-fb-dialog").dialog({resizable:!1,height:240,modal:!0,title:i,buttons:{OK:function(){p(this).dialog("close"),t.resolve()}}}),t.promise()}function s(e,i,t,c=!1){if(t.length>u){var[o,r,n,l=!1]=[e,i,t,c];var d=function(i,t){var c=[];for(let e=0;e<i.length;e+=t){var n=i.slice(e,e+t);c.push(n)}return c}(n,u);let a=d.length;var f=0,m=n.length,n=d.map(async function(e,i){var t;return t=1e3,await new Promise(e=>setTimeout(e,t)),p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,tryCount:0,retryLimit:3,data:{action:"gcmi_fb_save_filter_slice",_ajax_nonce:gcmi_fb_obj.nonce,includi:o,filtername:r,codici:e,total:a,slice:i+1},beforeSend:function(){p("#gcmi-spinner-blocks").hasClass("hidden")&&p("#gcmi-spinner-blocks").removeClass("hidden")},success:function(e){f++},error:function(e){if(422==e.status)return this.tryCount++,this.tryCount<=this.retryLimit?void p.ajax(this):(p("#gcmi-spinner-blocks").addClass("hidden"),void _(e,"CreateFilter"));422!=e.status&&(p("#gcmi-spinner-blocks").addClass("hidden"),_(e))}})});p.when(...n).then(()=>{var e,i,t,c,n;a===f&&([e,i,t,c,n=!1]=[o,r,a,m,l],p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,tryCount:0,retryLimit:3,data:{action:"gcmi_fb_create_filter_multi",_ajax_nonce:gcmi_fb_obj.nonce,includi:e,filtername:i,total:t,count:c},success:function(e){!1===n?(g(),p("#gcmi-fb-tabs").hide(),p("#gcmi-spinner-blocks").addClass("hidden")):(b(i),h("#fb_gcmi_filter_name",function(){p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,data:{action:"gcmi_fb_delete_filter",_ajax_nonce:gcmi_fb_obj.nonce,filtername:i},complete:function(){p("#gcmi-spinner-blocks").addClass("hidden")},error:function(e){console.log(e)}})}))},error:function(e){if(422==e.status)return this.tryCount++,this.tryCount<=this.retryLimit?void p.ajax(this):(p("#gcmi-spinner-blocks").addClass("hidden"),void _(e,!1===n?"CreateFilter":"TmpFilterFailed"));422!=e.status&&(p("#gcmi-spinner-blocks").addClass("hidden"),_(e,!1===n?"CreateFilter":"TmpFilterFailed"))}}))})}else a=i,s=c,p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,data:{action:"gcmi_fb_create_filter",_ajax_nonce:gcmi_fb_obj.nonce,includi:e,filtername:a,codici:t},beforeSend:function(){p("#gcmi-spinner-blocks").removeClass("hidden")},complete:function(){p("#gcmi-spinner-blocks").addClass("hidden")},success:function(e){!1===s?(g(),p("#gcmi-fb-tabs").hide()):(b(a),h("#fb_gcmi_filter_name",function(){p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,data:{action:"gcmi_fb_delete_filter",_ajax_nonce:gcmi_fb_obj.nonce,filtername:a},error:function(e){console.log(e)}})}))},error:function(e){_(e,!1===s?"CreateFilter":"TmpFilterFailed")}});var a,s}function h(e,i){p(e).length?i():setTimeout(function(){h(e,i)},100)}function _(e,i){let t="";var c,n='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 0 0;"></span>';let a=n;switch(i){case"CreateFilter":t=o("Error while creating the filter","campi-moduli-italiani");break;case"RetrieveFilter":t=o("Data recovery error","campi-moduli-italiani");break;case"TmpFilterFailed":t=o("Error in creating the temporary filter","campi-moduli-italiani");break;default:t=o("Received a server error","campi-moduli-italiani")}if(e.responseJSON){c=e.responseJSON.data;for(let e=0;e<c.length;e++)a=a+"<p><b>Err: "+c[e].code+"</b></p><p><i>"+c[e].message+"</i></p><p></p>"}else a=n+"<p><b>"+o("Err: Error not defined","campi-moduli-italiani")+"</b></p>";switch(i){case"CreateFilter":return void p.when(m(a,t)).then(void p("#fb_gcmi_filter_name").focus());case"TmpFilterFailed":return void p.when(m(a,t)).then(l())}}p("#gcmi-fb-tabs").hide(),p(document).on("click","#gcmi-fb-addnew-filter",function(){p("#gcmi-fb-tabs").show(),i(),n(),a(),p("input[type='checkbox'][id='gcmi-fb-include-ceased']").removeAttr("checked"),l()}),p(document).on("click","button[id^='gcmi-fb-edit-filter-']",function(){var e=p(this).attr("id").split("-").pop();c=e,p("#gcmi-fb-tabs").show(),i(),n(),a(),b(e),h("#fb_gcmi_filter_name",function(){p("#fb_gcmi_filter_name").val(c)})}),p(document).on("click","button[id^='gcmi-fb-delete-filter-']",function(){let e=p(this).attr("id").split("-").pop();var i=o("Confirm filter deletion","campi-moduli-italiani"),t='<span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span><p>'+o("Do you really want to delete the filter: ","campi-moduli-italiani")+"<b>"+e+"</b>?</p>"+o("WARNING: This procedure cannot check if the filter is used in one or more of your modules.","campi-moduli-italiani");p.when(f(t,i)).then(function(){p.ajax({type:"post",dataType:"json",url:gcmi_fb_obj.ajax_url,data:{action:"gcmi_fb_delete_filter",_ajax_nonce:gcmi_fb_obj.nonce,filtername:e},beforeSend:function(){p("#gcmi-spinner-blocks").removeClass("hidden")},complete:function(){p("#gcmi-spinner-blocks").addClass("hidden")},success:function(e){g()},error:function(e){var i=o("Error when eliminating the filter","campi-moduli-italiani");let t='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 0 0;"></span>';var c=e.responseJSON.data;for(let e=0;e<c.length;e++)t=t+"<p><b>"+o("Err: ","campi-moduli-italiani")+c[e].code+"</b></p><p><i>"+c[e].message+"</i></p><p></p>";p.when(m(t,i)).then(function(){})}})})}),p(document).on("click","#gcmi-fb-button-cancel",function(){var e=o("Confirm operation cancellation","campi-moduli-italiani"),i='<span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span>'+o("Do you want to cancel the creation/modification of the filter?","campi-moduli-italiani");p.when(f(i,e)).then(function(){p("#gcmi-fb-tabs").hide(),p("button[id^='gcmi-fb-delete-filter-']").removeAttr("disabled"),p("button[id^='gcmi-fb-edit-filter-']").removeAttr("disabled"),p("#gcmi-fb-addnew-filter").attr("disabled",!1)},function(){})}),p(document).on("click","#gcmi-fb-button-save",function(){event.preventDefault();var t=p("#gcmi-fb-tabs-4").find("input[type=checkbox]:checked").not("[id^='fb-gcmi-chkallcom-']").map(function(){return p(this).val()}).get();if(0===t.length)n=o("Save error","campi-moduli-italiani"),a='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 20px 0;"></span>'+o("No municipality has been selected to include in the filter.","campi-moduli-italiani"),p.when(m(a,n)).then(function(){p("#ui-id-4").click()});else{let i=p("#fb_gcmi_filter_name").val();if(""===i)a=o("Save error","campi-moduli-italiani"),n='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 20px 0;"></span>'+o("The filter name has not been indicated.","campi-moduli-italiani"),p.when(m(n,a)).then(function(){p("#fb_gcmi_filter_name").focus()});else if(20<i.length)n=o("Save error","campi-moduli-italiani"),a='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 20px 0;"></span>'+o("No more than 20 characters admitted for the filter name.","campi-moduli-italiani"),p.when(f(a,n)).then(function(){p("#fb_gcmi_filter_name").val(i.substring(0,20)),p("#fb_gcmi_filter_name").focus()});else{let e=p("#gcmi-fb-include-ceased").prop("checked");var c=function(e){let i;{if("string"==typeof e||e instanceof String){if(0===e.length)return!1;i=e.trim();e=new RegExp(/[\x80-\xff]/g);return 0!==(i=(i=e.test(i)?function(i){var t={"ª":"a","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"s","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ø":"O","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","Ŋ":"N","ŋ":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","Ə":"E","ǝ":"e","Ș":"S","ș":"s","Ț":"T","ț":"t","€":"E","£":"","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ầ":"A","ầ":"a","Ằ":"A","ằ":"a","Ề":"E","ề":"e","Ồ":"O","ồ":"o","Ờ":"O","ờ":"o","Ừ":"U","ừ":"u","Ỳ":"Y","ỳ":"y","Ả":"A","ả":"a","Ẩ":"A","ẩ":"a","Ẳ":"A","ẳ":"a","Ẻ":"E","ẻ":"e","Ể":"E","ể":"e","Ỉ":"I","ỉ":"i","Ỏ":"O","ỏ":"o","Ổ":"O","ổ":"o","Ở":"O","ở":"o","Ủ":"U","ủ":"u","Ử":"U","ử":"u","Ỷ":"Y","ỷ":"y","Ẫ":"A","ẫ":"a","Ẵ":"A","ẵ":"a","Ẽ":"E","ẽ":"e","Ễ":"E","ễ":"e","Ỗ":"O","ỗ":"o","Ỡ":"O","ỡ":"o","Ữ":"U","ữ":"u","Ỹ":"Y","ỹ":"y","Ấ":"A","ấ":"a","Ắ":"A","ắ":"a","Ế":"E","ế":"e","Ố":"O","ố":"o","Ớ":"O","ớ":"o","Ứ":"U","ứ":"u","Ạ":"A","ạ":"a","Ậ":"A","ậ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ệ":"E","ệ":"e","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ộ":"O","ộ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ự":"U","ự":"u","Ỵ":"Y","ỵ":"y","ɑ":"a","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u"};r.startsWith("de")?(t["Ä"]="Ae",t["ä"]="ae",t["Ö"]="Oe",t["ö"]="oe",t["Ü"]="Ue",t["ü"]="ue",t["ß"]="ss"):"da_DK"===r?(t["Æ"]="Ae",t["æ"]="ae",t["Ø"]="Oe",t["ø"]="oe",t["Å"]="Aa",t["å"]="aa"):"ca"===r?t["l·l"]="ll":"sr_RS"!==r&&"bs_BA"!==r||(t["Đ"]="DJ",t["đ"]="dj");let c="";for(let e=0;e<i.length;e++)i.charAt(e)in t?c+=t[i.charAt(e)]:c+=i.charAt(e);return c}(i):i).toLowerCase().replace(/[^a-z0-9_\-]/g,"").replace(/-/g,"_").replace(/(_)\1+/g,"_").replace(/^_+/,"").replace(/_+$/,"")).length&&i}return!1}}(i).substring(0,20);if(!1===c)a=o("Save error","campi-moduli-italiani"),n='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 20px 0;"></span>'+o("An invalid name for the filter was indicated.","campi-moduli-italiani"),p.when(m(n,a)).then(function(){p("#fb_gcmi_filter_name").focus()});else if(i!==c)n=o("Save error","campi-moduli-italiani"),a='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 20px 0;"></span>'+o("The value indicated for the filter name ","campi-moduli-italiani")+"<b>(<i>"+i+"</i>)</b>"+o("cannot be used.","campi-moduli-italiani")+"<br>"+o("Do you want to use: ","campi-moduli-italiani")+"<b>"+c+"</b> ?",p.when(f(a,n)).then(function(){p("#fb_gcmi_filter_name").val(c)});else{var n,a=p(".gcmi-fb-filters-container").find("span.gcmi-fb-filters-name").map(function(){return p(this).text()}).get();let i=!1;a.forEach(function(e){c===e&&(i=!0)}),!0===i?(n='<span class="ui-icon ui-icon-notice" style="float:left; margin:12px 12px 20px 0;"></span>'+o("You are overwriting the filter:","campi-moduli-italiani")+"<b><i>"+c+"</i></b>.<br>"+o("Do you want to continue?","campi-moduli-italiani"),p.when(f(n,"Sovrascrivi")).then(function(){s(e,c,t)})):s(e,c,t)}}}}),p("#gcmi-fb-tabs").tabs({active:0,collapsible:!0,heightStyle:"content",classes:{"ui-tabs":"ui-corner-none","ui-tabs-nav":"ui-corner-none","ui-tabs-tab":"ui-corner-none","ui-tabs-panel":"ui-corner-none"}}),p(document).on("change","input[type='checkbox'][id^='fb-gcmi-reg-']",function(){var e=p(this),i=p(this).attr("id").split("-").pop();!1===e.prop("checked")?(p("[id='fb-gcmi-chkallreg'").removeAttr("checked"),p("#gcmi-fb-regione-blocco-"+i).find("input[type='checkbox'][id^=\"fb-gcmi-prov-\"]:checked").removeAttr("checked"),p("#gcmi-fb-regione-blocco-"+i).find('input[type=checkbox][id^="fb-gcmi-prov-"]').trigger("change"),p("#gcmi-fb-regione-blocco-"+i).hide()):(p("#gcmi-fb-regione-blocco-"+i).find("input[type=checkbox][id^='fb-gcmi-prov-']:not(:checked)").prop("checked",!0),p("#gcmi-fb-regione-blocco-"+i).find("input[type=checkbox][id^='fb-gcmi-prov-']").trigger("change"),p("#gcmi-fb-regione-blocco-"+i).show(),p("[id='gcmi-fb-regioni-container").find("input[type=checkbox][id^=fb-gcmi-reg-]:checked").length===p("[id='gcmi-fb-regioni-container'").find("input[type=checkbox][id^=fb-gcmi-reg-]").length&&p("[id='fb-gcmi-chkallreg").prop("checked",!0))}),p(document).on("change","input[type='checkbox'][id^='fb-gcmi-prov-']",function(){var e=p(this),i=p(this).attr("id").split("-").pop(),t=p(this).parent().attr("class").split("-").pop();!1===e.prop("checked")?(p("[id='fb-gcmi-chkallpr-"+t+"'").removeAttr("checked"),p("[name^='gcmi-com-cod-pro-"+i+"'").find("input[type=checkbox]:checked").removeAttr("checked"),p("[name^='gcmi-com-cod-pro-"+i+"'").hide(),d()):(p("[name^='gcmi-com-cod-pro-"+i+"'").show(),p("[name^='gcmi-com-cod-pro-"+i+"'").find("input[type=checkbox]:not(:checked)").prop("checked",!0),d(),p("[id='gcmi-fb-regione-blocco-"+t+"'").find("input[type=checkbox][id^=fb-gcmi-prov-]:checked").length===p("[id='gcmi-fb-regione-blocco-"+t+"'").find("input[type=checkbox][id^=fb-gcmi-prov-]").length&&p("[id='fb-gcmi-chkallpr-"+t+"'").prop("checked",!0))}),p(document).on("change","input[type='checkbox'][id^='fb-gcmi-com-']",function(){var e=Array.from(p("label[for='"+this.name+"']").text())[0];p("[id='fb-gcmi-chkallcom-"+e+"'").removeAttr("checked"),p("[id='gcmi-fb-lettera-blocco-"+e+"'").find("input[type=checkbox][id^=fb-gcmi-com-]:visible:checked").length===p("[id='gcmi-fb-lettera-blocco-"+e+"'").find("input[type=checkbox][id^=fb-gcmi-com-]:visible").length&&p("[id='fb-gcmi-chkallcom-"+e+"'").prop("checked",!0)}),p(document).on("change","input[type='checkbox'][id='fb-gcmi-chkallreg']",function(){!1===p(this).prop("checked")?p("input[type='checkbox'][id^='fb-gcmi-reg-']").each(function(){p(this).removeAttr("checked").trigger("change")}):p("input[type='checkbox'][id^='fb-gcmi-reg-']").each(function(){p(this).prop("checked",!0).trigger("change")})}),p(document).on("change","input[type='checkbox'][id^='fb-gcmi-chkallpr-']",function(){var e=p(this),i=p(this).attr("id").split("-").pop();!1===e.prop("checked")?p("#gcmi-fb-regione-blocco-"+i).find("input[type=checkbox]:checked").not("[id^='fb-gcmi-chkallpr-']").removeAttr("checked"):p("#gcmi-fb-regione-blocco-"+i).find("input[type=checkbox]:not(:checked)").not("[id^='fb-gcmi-chkallpr-']").prop("checked",!0),p("#gcmi-fb-regione-blocco-"+i).find("input[type=checkbox]").not("[id^='fb-gcmi-chkallpr-']").trigger("change")}),p(document).on("change","input[type='checkbox'][id^='fb-gcmi-chkallcom-']",function(){var e=p(this),i=p(this).attr("id").split("-").pop();!1===e.prop("checked")?p("#gcmi-fb-lettera-blocco-"+i).find("input[type=checkbox]:checked:visible").not("[id^='fb-gcmi-chkallcom-']").removeAttr("checked"):p("#gcmi-fb-lettera-blocco-"+i).find("input[type=checkbox]:not(:checked):visible").not("[id^='fb-gcmi-chkallcom-']").prop("checked",!0)}),p(document).on("change","input[type='checkbox'][id='gcmi-fb-include-ceased']",function(){c=p("#fb_gcmi_filter_name").val();var e="tmp_"+(new Date).getTime(),i=p("#gcmi-fb-include-ceased").prop("checked"),t=(event.preventDefault(),p("#gcmi-fb-tabs-4").find("input[type=checkbox]:checked").not("[id^='fb-gcmi-chkallcom-']").map(function(){return p(this).val()}).get());n(),a(),s(i,e,t,!0),h("#fb_gcmi_filter_name",function(){p("#fb_gcmi_filter_name").val(c)})})});