/*! campi-moduli-italiani 2.1.0 */
jQuery(document).ready(function(t){"use strict";const a=wp.i18n["__"];var i,n,o,e,c,l,d,s,r,w='<option value="">'+a("Select...","campi-moduli-italiani")+"</option>",h='<option value="">'+a("Wait...","campi-moduli-italiani")+"</option>",u="",f="",g="",p="",x=typeof("function"===window.Choices),m="",y="",P="",M="gcmi_kind",_="gcmi_filtername",v="gcmi_regione",b="gcmi_province",j="gcmi_prov_desc",$="gcmi_comu_desc",C="choicesjs-select",k="gcmi_comuni",S="gcmi_icon",O="gcmi_targa",T="gcmi_info";t("select[id$='"+v+"']").val(""),t("select[id$='"+v+"']").prop("disabled",!1),t("select[id$='"+b+"']").html(w),t("select[id$='"+b+"']").attr("disabled","disabled"),t("select[id$='"+k+"']").html(w),t("select[id$='"+k+"']").attr("disabled","disabled"),t("[id$='"+S+"']").hide(),t("input[id$='"+O+"']").val(""),t("input[id$='gcmi_mail']").val(""),void 0!==t.fn.niceSelect&&(l=t("select[id*='gcmi'][style='display: none']"),d=window.MutationObserver||window.WebKitMutationObserver,s=new d(function(e){e=e[0].target,t(e).niceSelect("update")}),r={attributes:!0,characterData:!0,childList:!0,subtree:!0},l.each(function(){s.observe(this,r)})),t("select[id$='"+v+"']").on("change",function(){window.MyPrefix=this.id.substring(0,this.id.length-v.length),f=t("select#"+window.MyPrefix+v+" option:selected").attr("value"),n=t("select#"+window.MyPrefix+v+" option:selected").text(),g=t("input#"+window.MyPrefix+M).attr("value"),p=t("input#"+window.MyPrefix+_).attr("value"),t.ajax({beforeSend:function(e){switch(t("input#"+window.MyPrefix+"gcmi_reg_desc").val(n),t("input#"+window.MyPrefix+j).val(""),t("input#"+window.MyPrefix+$).val(""),y=t("select#"+window.MyPrefix+b),P=t("select#"+window.MyPrefix+k),e){case"":y.html(w),P.html(w);break;case"00":y.html(h),P.html(h);break;default:y.html(h),P.html(w)}y.attr("disabled","disabled"),P.attr("disabled","disabled"),x&&y.hasClass(C)&&(t(y).data("choicesjs").setChoices(Array.from(t(y)[0].options),"value","label",!0),t(y).data("choicesjs").disable()),x&&P.hasClass(C)&&(t(P).data("choicesjs").setChoices(Array.from(t(P)[0].options),"value","label",!0),t(P).data("choicesjs").disable())},data:{action:"the_ajax_hook_prov",codice_regione:f,gcmi_filtername:p,gcmi_kind:g,nonce_ajax:gcmi_ajax.nonce},success:function(e){(m=t("00"===f?"select#"+window.MyPrefix+k:"select#"+window.MyPrefix+b)).prop("disabled",!1),m.html(e),x&&m.hasClass(C)&&(t(m).data("choicesjs").setChoices(Array.from(t(m)[0].options),"value","label",!0),t(m).data("choicesjs").enable()),e=window.MyPrefix,2===t("#"+e+b).children("option").length&&(t("#"+e+b+" option").eq(1).prop("selected",!0),t("#"+e+b).trigger("change"),t("label[for='"+e+b).hide(),t("#"+e+b).hide())},type:"POST",url:gcmi_ajax.ajaxurl}),t("#"+window.MyPrefix+S).hide(),t("#"+window.MyPrefix+T).hide()}),t("select[id$='"+b+"']").on("change",function(){window.MyPrefix=this.id.substring(0,this.id.length-b.length),i=t("select#"+window.MyPrefix+b+" option:selected").attr("value"),o=t("select#"+window.MyPrefix+b+" option:selected").text(),g=t("input#"+window.MyPrefix+M).attr("value"),p=t("input#"+window.MyPrefix+_).attr("value"),t.ajax({beforeSend:function(e){t("input#"+window.MyPrefix+j).val(o),t("input#"+window.MyPrefix+$).val(""),(P=t("select#"+window.MyPrefix+k)).html(h),P.attr("disabled","disabled"),x&&P.hasClass(C)&&(t(P).data("choicesjs").setChoices(Array.from(t(P)[0].options),"value","label",!0),t(P).data("choicesjs").disable())},data:{action:"the_ajax_hook_comu",codice_provincia:i,gcmi_filtername:p,gcmi_kind:g,nonce_ajax:gcmi_ajax.nonce},success:function(e){""!==i?(P.html(e),P.prop("disabled",!1)):P.html(w),x&&P.hasClass(C)&&(t(P).data("choicesjs").setChoices(Array.from(t(P)[0].options),"value","label",!0),t(P).data("choicesjs").enable())},type:"POST",url:gcmi_ajax.ajaxurl}),t("#"+window.MyPrefix+S).hide(),t("#"+window.MyPrefix+T).hide()}),t("select[id$='"+k+"']").on("change",function(){var i="";window.MyPrefix=this.id.substring(0,this.id.length-k.length),u=t("select#"+window.MyPrefix+k+" option:selected").attr("value"),t.ajax({beforeSend:function(){g=t("input#"+window.MyPrefix+M).attr("value"),p=t("input#"+window.MyPrefix+_).attr("value"),e=t("select#"+window.MyPrefix+k+" option:selected").text(),t("input#"+window.MyPrefix+$).val(e)},data:{action:"the_ajax_hook_targa",codice_comune:u,gcmi_filtername:p,gcmi_kind:g,nonce_ajax:gcmi_ajax.nonce},success:function(e){t("input#"+window.MyPrefix+O).val(e),i="00"!==f?t("select#"+window.MyPrefix+k+" option:selected").text()+" ("+t("input#"+window.MyPrefix+O).val()+")":t("select#"+window.MyPrefix+k+" option:selected").text()+" - ("+a("sopp.","campi-moduli-italiani")+") ("+t("input#"+window.MyPrefix+O).val()+")",t("input#"+window.MyPrefix+"gcmi_formatted").attr("value",i),t("#"+window.MyPrefix+T).hide(),""!==t("select#"+window.MyPrefix+k+" option:selected").val()?t("#"+window.MyPrefix+S).show():t("#"+window.MyPrefix+S).hide()},type:"POST",url:gcmi_ajax.ajaxurl})}),t("[id$='"+S+"']").on("click",function(){window.MyPrefix=event.target.id.substring(0,event.target.id.length-S.length),u=t("select#"+window.MyPrefix+k+" option:selected").attr("value"),t.ajax({data:{action:"the_ajax_hook_info",codice_comune:u,gcmi_filtername:p,nonce_ajax:gcmi_ajax.nonce},success:function(e){e=e.trim();""!==e&&(t("#"+window.MyPrefix+T).html(e),t("#"+window.MyPrefix+T).dialog({autoOpen:!1,closeText:a("Close","campi-moduli-italiani"),height:"auto",hide:"puff",maxWidth:600,minWidth:300,show:"slide",title:a("Municipality details","campi-moduli-italiani"),width:"auto"}),t("#"+window.MyPrefix+T).dialog("open"))},type:"POST",url:gcmi_ajax.ajaxurl})}),t("[id^='TTVar']").on("mouseover",function(){event.target.id.tooltip()}),t("select[id$='"+k+"']").each(function(){var e=this.id.substring(0,this.id.length-k.length);void 0!==(c=t(this).attr("data-prval"))&&!1!==c&&!async function(e,i){try{await t("select#"+e+v).find('option[value="'+i.substring(0,2)+'"]').prop("selected",!0).trigger("change")}catch(e){console.log(e)}if("00"!==t("select#"+e+v).val())try{await t("select#"+e+b).find('option[value="'+i.substring(2,5)+'"]').prop("selected",!0).trigger("change")}catch(e){console.log(e)}try{await t("select#"+e+k).find('option[value="'+i.substring(5)+'"]').prop("selected",!0).trigger("change")}catch(e){console.log(e)}}(e,c)}),t("select[id$='"+v+"']").each(function(){window.MyPrefix=this.id.substring(0,this.id.length-v.length),2===t(this).children("option").length&&(t("#"+window.MyPrefix+v+" option").eq(1).prop("selected",!0),t("#"+window.MyPrefix+v).trigger("change"),t("label[for='"+window.MyPrefix+v+"'").hide(),t(this).hide())})});